====================基础知识=====================
threadlocal底层，
java动态代理，
对称加密和非对称加密，
threadlocal的threadlocalmap，
和cglib，
mysql的innor db和myisam
synthronized锁升级，
枚举单利，
垃圾收集cms，g1，
longadder，
枚举单例
=============netty开始记录====================
13/06*03：解决粘包和半包：
14/04*39：编码方式：
14/08*26：讲解pb
15/08*30：netty结合pb
19/06*07：零复制
堆内外内存
=============netty结束记录====================
select userId,sum(money) a from charge where userId between 2070000000 and 2071000000 and  createTime > 1587052800 and status = 2 group by userId order by a desc limit 200

select a from (select distinct(round(((userId%1000000)/1000),0)) as a from player)as b order by a

centeros安装	yum -y install tinyproxy
配置文件		/etc/tinyproxy.conf
Port 8888		代理的端口
Allow 127.0.0.1	被允许代理的ip
重启		sudo service tinyproxy restart 
/bin/systemctl start tinyproxy
========================================检查日志========================================
cd /data/logs/129/logic/
cat gs_logic-2020-03-26-00-1.log | tail -n +2500 | head -n 500
addGeneral|10|7143171|13|129000210
cd /data/logs/117/logs/
cat gameServer-2020-02-24-18-1.log | tail -n +100 | head -n 500
========================================玩家数据查询========================================
cd /data/fe/online/

安卓ios查询
select if(osType=1,'android','ios') as type,count(1) as num from player order by osType;

mysql -uroot -proot
use zombie_game
select from_unixtime(lastLoginTime),from_unixtime(lastLogoutTime),todayOnlineTime from player where userId=1998003585;

select count(*)from player where lastLoginTime>lastLogoutTime;

update activityconfig set beginTime=1514736000,endTime=1517414400;

select concat('drop table ',table_name,';') from information_schema.TABLES where table_schema='charge' into outfile 'D:\data\test.txt';


玩家信息查询：
select userId,from_unixtime(lastLoginTime)  from player order by lastLoginTime desc limit 10

select account,userId,diamond,userName,level,vipLv,totalRecharge,power,from_unixtime(createTime),from_unixtime(lastLoginTime),from_unixtime(lastLogoutTime),todayOnlineTime/3600 from player 
where userId=109004704;

select account,userId,diamond,userName,level,vipLv,totalRecharge,power,from_unixtime(createTime),from_unixtime(lastLoginTime),from_unixtime(lastLogoutTime),todayOnlineTime/3600 from player 
where userName="";

活动查询：
select type,from_unixtime(beginTime),from_unixtime(endTime),showOrder,param from activityconfig;

充值查询：
select *,from_unixtime(doneTime) from charge where userId= 1591000561 and status =2 order by doneTime desc limit 20
select *,from_unixtime(createTime) from charge where chargeId=7009 order by createTime desc limit 20
select count(*),chargeId from charge where status =2 and createTime>1572537600 and createTime<1575129600 and chargeId between 7201 and 7224 group by chargeId

通用查询：
select count(1) from player where level >10; 
select count(1) from player where level; 
select sum(money)from charge where status =2;
select sum(money) sum,from_unixtime(createTime,"%y-%m-%d") day from charge where status =2 group by day order by day desc limit 20;
========================================英文版统计数据========================================
mysql -uroot -pranshao
set @time1=UNIX_TIMESTAMP('2020-03-20');
set @time2=UNIX_TIMESTAMP('2020-03-21');

use fe_game_101;select count(*) as 新增人数 from player where createTime between @time1 and @time2;select sum(money)/100 as 当天新增收入 from charge where status=2 and createTime between @time1 and @time2;select sum(money)/100 as 总收入 from charge where status=2 and createTime<@time2;select count(*) as 活跃人数 from player where createTime<@time2 and lastLoginTime>@time1;select count(*) as 总人数 from player where createTime<@time2;select  sum(one)/100 as 新收入,count(one) as 新付费人数 from (select sum(money) as one from charge where status=2 and createTime<@time2 and userId in (select userId from player where createTime between @time1 and @time2) group by userId) as a;
use fe_game_102;select count(*) as 新增人数 from player where createTime between @time1 and @time2;select sum(money)/100 as 当天新增收入 from charge where status=2 and createTime between @time1 and @time2;select sum(money)/100 as 总收入 from charge where status=2 and createTime<@time2;select count(*) as 活跃人数 from player where createTime<@time2 and lastLoginTime>@time1;select count(*) as 总人数 from player where createTime<@time2;select  sum(one)/100 as 新收入,count(one) as 新付费人数 from (select sum(money) as one from charge where status=2 and createTime<@time2 and userId in (select userId from player where createTime between @time1 and @time2) group by userId) as a;
use fe_game_103;select count(*) as 新增人数 from player where createTime between @time1 and @time2;select sum(money)/100 as 当天新增收入 from charge where status=2 and createTime between @time1 and @time2;select sum(money)/100 as 总收入 from charge where status=2 and createTime<@time2;select count(*) as 活跃人数 from player where createTime<@time2 and lastLoginTime>@time1;select count(*) as 总人数 from player where createTime<@time2;select  sum(one)/100 as 新收入,count(one) as 新付费人数 from (select sum(money) as one from charge where status=2 and createTime<@time2 and userId in (select userId from player where createTime between @time1 and @time2) group by userId) as a;
use fe_game_104;select count(*) as 新增人数 from player where createTime between @time1 and @time2;select sum(money)/100 as 当天新增收入 from charge where status=2 and createTime between @time1 and @time2;select sum(money)/100 as 总收入 from charge where status=2 and createTime<@time2;select count(*) as 活跃人数 from player where createTime<@time2 and lastLoginTime>@time1;select count(*) as 总人数 from player where createTime<@time2;select  sum(one)/100 as 新收入,count(one) as 新付费人数 from (select sum(money) as one from charge where status=2 and createTime<@time2 and userId in (select userId from player where createTime between @time1 and @time2) group by userId) as a;
use fe_game_105;select count(*) as 新增人数 from player where createTime between @time1 and @time2;select sum(money)/100 as 当天新增收入 from charge where status=2 and createTime between @time1 and @time2;select sum(money)/100 as 总收入 from charge where status=2 and createTime<@time2;select count(*) as 活跃人数 from player where createTime<@time2 and lastLoginTime>@time1;select count(*) as 总人数 from player where createTime<@time2;select  sum(one)/100 as 新收入,count(one) as 新付费人数 from (select sum(money) as one from charge where status=2 and createTime<@time2 and userId in (select userId from player where createTime between @time1 and @time2) group by userId) as a;

use fe_game_106;select count(*) as 新增人数 from player where createTime between @time1 and @time2;select sum(money)/100 as 当天新增收入 from charge where status=2 and createTime between @time1 and @time2;select sum(money)/100 as 总收入 from charge where status=2 and createTime<@time2;select count(*) as 活跃人数 from player where createTime<@time2 and lastLoginTime>@time1;select count(*) as 总人数 from player where createTime<@time2;select  sum(one)/100 as 新收入,count(one) as 新付费人数 from (select sum(money) as one from charge where status=2 and createTime<@time2 and userId in (select userId from player where createTime between @time1 and @time2) group by userId) as a;
use fe_game_107;select count(*) as 新增人数 from player where createTime between @time1 and @time2;select sum(money)/100 as 当天新增收入 from charge where status=2 and createTime between @time1 and @time2;select sum(money)/100 as 总收入 from charge where status=2 and createTime<@time2;select count(*) as 活跃人数 from player where createTime<@time2 and lastLoginTime>@time1;select count(*) as 总人数 from player where createTime<@time2;select  sum(one)/100 as 新收入,count(one) as 新付费人数 from (select sum(money) as one from charge where status=2 and createTime<@time2 and userId in (select userId from player where createTime between @time1 and @time2) group by userId) as a;
use fe_game_108;select count(*) as 新增人数 from player where createTime between @time1 and @time2;select sum(money)/100 as 当天新增收入 from charge where status=2 and createTime between @time1 and @time2;select sum(money)/100 as 总收入 from charge where status=2 and createTime<@time2;select count(*) as 活跃人数 from player where createTime<@time2 and lastLoginTime>@time1;select count(*) as 总人数 from player where createTime<@time2;select  sum(one)/100 as 新收入,count(one) as 新付费人数 from (select sum(money) as one from charge where status=2 and createTime<@time2 and userId in (select userId from player where createTime between @time1 and @time2) group by userId) as a;
use fe_game_109;select count(*) as 新增人数 from player where createTime between @time1 and @time2;select sum(money)/100 as 当天新增收入 from charge where status=2 and createTime between @time1 and @time2;select sum(money)/100 as 总收入 from charge where status=2 and createTime<@time2;select count(*) as 活跃人数 from player where createTime<@time2 and lastLoginTime>@time1;select count(*) as 总人数 from player where createTime<@time2;select  sum(one)/100 as 新收入,count(one) as 新付费人数 from (select sum(money) as one from charge where status=2 and createTime<@time2 and userId in (select userId from player where createTime between @time1 and @time2) group by userId) as a;
use fe_game_110;select count(*) as 新增人数 from player where createTime between @time1 and @time2;select sum(money)/100 as 当天新增收入 from charge where status=2 and createTime between @time1 and @time2;select sum(money)/100 as 总收入 from charge where status=2 and createTime<@time2;select count(*) as 活跃人数 from player where createTime<@time2 and lastLoginTime>@time1;select count(*) as 总人数 from player where createTime<@time2;select  sum(one)/100 as 新收入,count(one) as 新付费人数 from (select sum(money) as one from charge where status=2 and createTime<@time2 and userId in (select userId from player where createTime between @time1 and @time2) group by userId) as a;
use fe_game_111;select count(*) as 新增人数 from player where createTime between @time1 and @time2;select sum(money)/100 as 当天新增收入 from charge where status=2 and createTime between @time1 and @time2;select sum(money)/100 as 总收入 from charge where status=2 and createTime<@time2;select count(*) as 活跃人数 from player where createTime<@time2 and lastLoginTime>@time1;select count(*) as 总人数 from player where createTime<@time2;select  sum(one)/100 as 新收入,count(one) as 新付费人数 from (select sum(money) as one from charge where status=2 and createTime<@time2 and userId in (select userId from player where createTime between @time1 and @time2) group by userId) as a;
use fe_game_112;select count(*) as 新增人数 from player where createTime between @time1 and @time2;select sum(money)/100 as 当天新增收入 from charge where status=2 and createTime between @time1 and @time2;select sum(money)/100 as 总收入 from charge where status=2 and createTime<@time2;select count(*) as 活跃人数 from player where createTime<@time2 and lastLoginTime>@time1;select count(*) as 总人数 from player where createTime<@time2;select  sum(one)/100 as 新收入,count(one) as 新付费人数 from (select sum(money) as one from charge where status=2 and createTime<@time2 and userId in (select userId from player where createTime between @time1 and @time2) group by userId) as a;
use fe_game_113;select count(*) as 新增人数 from player where createTime between @time1 and @time2;select sum(money)/100 as 当天新增收入 from charge where status=2 and createTime between @time1 and @time2;select sum(money)/100 as 总收入 from charge where status=2 and createTime<@time2;select count(*) as 活跃人数 from player where createTime<@time2 and lastLoginTime>@time1;select count(*) as 总人数 from player where createTime<@time2;select  sum(one)/100 as 新收入,count(one) as 新付费人数 from (select sum(money) as one from charge where status=2 and createTime<@time2 and userId in (select userId from player where createTime between @time1 and @time2) group by userId) as a;
use fe_game_114;select count(*) as 新增人数 from player where createTime between @time1 and @time2;select sum(money)/100 as 当天新增收入 from charge where status=2 and createTime between @time1 and @time2;select sum(money)/100 as 总收入 from charge where status=2 and createTime<@time2;select count(*) as 活跃人数 from player where createTime<@time2 and lastLoginTime>@time1;select count(*) as 总人数 from player where createTime<@time2;select  sum(one)/100 as 新收入,count(one) as 新付费人数 from (select sum(money) as one from charge where status=2 and createTime<@time2 and userId in (select userId from player where createTime between @time1 and @time2) group by userId) as a;
use fe_game_115;select count(*) as 新增人数 from player where createTime between @time1 and @time2;select sum(money)/100 as 当天新增收入 from charge where status=2 and createTime between @time1 and @time2;select sum(money)/100 as 总收入 from charge where status=2 and createTime<@time2;select count(*) as 活跃人数 from player where createTime<@time2 and lastLoginTime>@time1;select count(*) as 总人数 from player where createTime<@time2;select  sum(one)/100 as 新收入,count(one) as 新付费人数 from (select sum(money) as one from charge where status=2 and createTime<@time2 and userId in (select userId from player where createTime between @time1 and @time2) group by userId) as a;

use fe_game_116;select count(*) as 新增人数 from player where createTime between @time1 and @time2;select sum(money)/100 as 当天新增收入 from charge where status=2 and createTime between @time1 and @time2;select sum(money)/100 as 总收入 from charge where status=2 and createTime<@time2;select count(*) as 活跃人数 from player where createTime<@time2 and lastLoginTime>@time1;select count(*) as 总人数 from player where createTime<@time2;select  sum(one)/100 as 新收入,count(one) as 新付费人数 from (select sum(money) as one from charge where status=2 and createTime<@time2 and userId in (select userId from player where createTime between @time1 and @time2) group by userId) as a;
use fe_game_117;select count(*) as 新增人数 from player where createTime between @time1 and @time2;select sum(money)/100 as 当天新增收入 from charge where status=2 and createTime between @time1 and @time2;select sum(money)/100 as 总收入 from charge where status=2 and createTime<@time2;select count(*) as 活跃人数 from player where createTime<@time2 and lastLoginTime>@time1;select count(*) as 总人数 from player where createTime<@time2;select  sum(one)/100 as 新收入,count(one) as 新付费人数 from (select sum(money) as one from charge where status=2 and createTime<@time2 and userId in (select userId from player where createTime between @time1 and @time2) group by userId) as a;
use fe_game_118;select count(*) as 新增人数 from player where createTime between @time1 and @time2;select sum(money)/100 as 当天新增收入 from charge where status=2 and createTime between @time1 and @time2;select sum(money)/100 as 总收入 from charge where status=2 and createTime<@time2;select count(*) as 活跃人数 from player where createTime<@time2 and lastLoginTime>@time1;select count(*) as 总人数 from player where createTime<@time2;select  sum(one)/100 as 新收入,count(one) as 新付费人数 from (select sum(money) as one from charge where status=2 and createTime<@time2 and userId in (select userId from player where createTime between @time1 and @time2) group by userId) as a;
use fe_game_119;select count(*) as 新增人数 from player where createTime between @time1 and @time2;select sum(money)/100 as 当天新增收入 from charge where status=2 and createTime between @time1 and @time2;select sum(money)/100 as 总收入 from charge where status=2 and createTime<@time2;select count(*) as 活跃人数 from player where createTime<@time2 and lastLoginTime>@time1;select count(*) as 总人数 from player where createTime<@time2;select  sum(one)/100 as 新收入,count(one) as 新付费人数 from (select sum(money) as one from charge where status=2 and createTime<@time2 and userId in (select userId from player where createTime between @time1 and @time2) group by userId) as a;
use fe_game_120;select count(*) as 新增人数 from player where createTime between @time1 and @time2;select sum(money)/100 as 当天新增收入 from charge where status=2 and createTime between @time1 and @time2;select sum(money)/100 as 总收入 from charge where status=2 and createTime<@time2;select count(*) as 活跃人数 from player where createTime<@time2 and lastLoginTime>@time1;select count(*) as 总人数 from player where createTime<@time2;select  sum(one)/100 as 新收入,count(one) as 新付费人数 from (select sum(money) as one from charge where status=2 and createTime<@time2 and userId in (select userId from player where createTime between @time1 and @time2) group by userId) as a;
use fe_game_121;select count(*) as 新增人数 from player where createTime between @time1 and @time2;select sum(money)/100 as 当天新增收入 from charge where status=2 and createTime between @time1 and @time2;select sum(money)/100 as 总收入 from charge where status=2 and createTime<@time2;select count(*) as 活跃人数 from player where createTime<@time2 and lastLoginTime>@time1;select count(*) as 总人数 from player where createTime<@time2;select  sum(one)/100 as 新收入,count(one) as 新付费人数 from (select sum(money) as one from charge where status=2 and createTime<@time2 and userId in (select userId from player where createTime between @time1 and @time2) group by userId) as a;
use fe_game_122;select count(*) as 新增人数 from player where createTime between @time1 and @time2;select sum(money)/100 as 当天新增收入 from charge where status=2 and createTime between @time1 and @time2;select sum(money)/100 as 总收入 from charge where status=2 and createTime<@time2;select count(*) as 活跃人数 from player where createTime<@time2 and lastLoginTime>@time1;select count(*) as 总人数 from player where createTime<@time2;select  sum(one)/100 as 新收入,count(one) as 新付费人数 from (select sum(money) as one from charge where status=2 and createTime<@time2 and userId in (select userId from player where createTime between @time1 and @time2) group by userId) as a;
use fe_game_123;select count(*) as 新增人数 from player where createTime between @time1 and @time2;select sum(money)/100 as 当天新增收入 from charge where status=2 and createTime between @time1 and @time2;select sum(money)/100 as 总收入 from charge where status=2 and createTime<@time2;select count(*) as 活跃人数 from player where createTime<@time2 and lastLoginTime>@time1;select count(*) as 总人数 from player where createTime<@time2;select  sum(one)/100 as 新收入,count(one) as 新付费人数 from (select sum(money) as one from charge where status=2 and createTime<@time2 and userId in (select userId from player where createTime between @time1 and @time2) group by userId) as a;
use fe_game_124;select count(*) as 新增人数 from player where createTime between @time1 and @time2;select sum(money)/100 as 当天新增收入 from charge where status=2 and createTime between @time1 and @time2;select sum(money)/100 as 总收入 from charge where status=2 and createTime<@time2;select count(*) as 活跃人数 from player where createTime<@time2 and lastLoginTime>@time1;select count(*) as 总人数 from player where createTime<@time2;select  sum(one)/100 as 新收入,count(one) as 新付费人数 from (select sum(money) as one from charge where status=2 and createTime<@time2 and userId in (select userId from player where createTime between @time1 and @time2) group by userId) as a;
use fe_game_125;select count(*) as 新增人数 from player where createTime between @time1 and @time2;select sum(money)/100 as 当天新增收入 from charge where status=2 and createTime between @time1 and @time2;select sum(money)/100 as 总收入 from charge where status=2 and createTime<@time2;select count(*) as 活跃人数 from player where createTime<@time2 and lastLoginTime>@time1;select count(*) as 总人数 from player where createTime<@time2;select  sum(one)/100 as 新收入,count(one) as 新付费人数 from (select sum(money) as one from charge where status=2 and createTime<@time2 and userId in (select userId from player where createTime between @time1 and @time2) group by userId) as a;

========================================删除个人数据========================================
set @userId = 500000089;

update towerpassinfo set fastUserId =0 where fastUserId=@userId;delete from activityconfig where userId = @userId;delete from activityinfo where userId = @userId;delete from activityrecharge where userId = @userId;delete from activitytasksum where userId = @userId;delete from arena where userId = @userId;delete from arenalog where userId = @userId;delete from backpack where userId = @userId;delete from blacklist where userId = @userId;delete from cdkrecord where userId = @userId;delete from charge where userId = @userId;delete from chatmessage where userId = @userId;delete from corps where userId = @userId;delete from corpsbackpack where userId = @userId;delete from corpsbackpacklog where userId = @userId;delete from corpsdungeon where userId = @userId;delete from corpsdungeondamage where userId = @userId;delete from corpslog where userId = @userId;delete from corpsmember where userId = @userId;delete from corpsmembertask where userId = @userId;delete from corpsredpacket where userId = @userId;delete from corpsrequest where userId = @userId;delete from corpsskill where userId = @userId;delete from dailydungeon where userId = @userId;delete from dbedition where userId = @userId;delete from endless where userId = @userId;delete from equipment where userId = @userId;delete from expedition where userId = @userId;delete from fragment where userId = @userId;delete from friend where userId = @userId;delete from gameactivityinfo where userId = @userId;delete from gameinfo where userId = @userId;delete from gamelog where userId = @userId;delete from gamemessage where userId = @userId;delete from globalmail where userId = @userId;delete from globalmaillog where userId = @userId;delete from hero where userId = @userId;delete from herobook where userId = @userId;delete from instance where userId = @userId;delete from loopgift where userId = @userId;delete from luckdraw where userId = @userId;delete from mineinfo where userId = @userId;delete from minelog where userId = @userId;delete from mineoccupy where userId = @userId;delete from player where userId = @userId;delete from playerlog where userId = @userId;delete from playerteamdata where userId = @userId;delete from privilege where userId = @userId;delete from randomshop where userId = @userId;delete from rechargeinfo where userId = @userId;delete from relic where userId = @userId;delete from requestfriend where userId = @userId;delete from risk where userId = @userId;delete from riskevent where userId = @userId;delete from riskgoods where userId = @userId;delete from robot where userId = @userId;delete from rune where userId = @userId;delete from sevendaytask where userId = @userId;delete from shippinginfo where userId = @userId;delete from shippingtask where userId = @userId;delete from shoprecord where userId = @userId;delete from task where userId = @userId;delete from team where userId = @userId;delete from tower where userId = @userId;delete from towerpassinfo where userId = @userId;delete from video where userId = @userId;delete from welfare where userId = @userId;

delete from activityinfo where userId not in(select userId from player);delete from activityrecharge where userId not in(select userId from player);delete from activitytasksum where userId not in(select userId from player);delete from arena where userId not in(select userId from player);delete from arenalog where userId not in(select userId from player);delete from backpack where userId not in(select userId from player);delete from blacklist where userId not in(select userId from player);delete from cdkrecord where userId not in(select userId from player);delete from charge where userId not in(select userId from player);delete from chatmessage where userId not in(select userId from player);delete from corpsdungeondamage where userId not in(select userId from player);delete from corpsmember where userId not in(select userId from player);delete from corpsmembertask where userId not in(select userId from player);delete from corpsrequest where userId not in(select userId from player);delete from corpsskill where userId not in(select userId from player);delete from dailydungeon where userId not in(select userId from player);delete from endless where userId not in(select userId from player);delete from equipment where userId not in(select userId from player);delete from expedition where userId not in(select userId from player);delete from fragment where userId not in(select userId from player);delete from friend where userId not in(select userId from player);delete from gamelog where userId not in(select userId from player);delete from gamemessage where userId not in(select userId from player);delete from globalmaillog where userId not in(select userId from player);delete from hero where userId not in(select userId from player);delete from herobook where userId not in(select userId from player);delete from instance where userId not in(select userId from player);delete from loopgift where userId not in(select userId from player);delete from luckdraw where userId not in(select userId from player);delete from mineinfo where userId not in(select userId from player);delete from minelog where userId not in(select userId from player);delete from mineoccupy where userId not in(select userId from player);delete from player where userId not in(select userId from player);delete from playerlog where userId not in(select userId from player);delete from playerteamdata where userId not in(select userId from player);delete from privilege where userId not in(select userId from player);delete from randomshop where userId not in(select userId from player);delete from rechargeinfo where userId not in(select userId from player);delete from relic where userId not in(select userId from player);delete from requestfriend where userId not in(select userId from player);delete from risk where userId not in(select userId from player);delete from riskevent where userId not in(select userId from player);delete from riskgoods where userId not in(select userId from player);delete from robot where userId not in(select userId from player);delete from rune where userId not in(select userId from player);delete from sevendaytask where userId not in(select userId from player);delete from shippinginfo where userId not in(select userId from player);delete from shippingtask where userId not in(select userId from player);delete from shoprecord where userId not in(select userId from player);delete from task where userId not in(select userId from player);delete from team where userId not in(select userId from player);delete from tower where userId not in(select userId from player);delete from welfare where userId not in(select userId from player);